#!/bin/bash
# Custom build script for Replit deployment
echo "ğŸ”§ Starting custom deployment build..."

# Create directories
mkdir -p dist/public

# Ensure static files exist
if [ ! -f "dist/public/index.html" ]; then
    echo "ğŸ“„ Static files already exist"
fi

# Build server only (skip problematic frontend build)
echo "ğŸ—ï¸ Building production server..."
npx esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

echo "âœ… Custom build completed successfully!"
echo "ğŸ“¦ Server: dist/index.js"
echo "ğŸŒ Static: dist/public/"